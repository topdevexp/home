<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <h1></h1>
</head>
<body>
<h1 id="---">开发者体验社区 - 可能是最关心开发者体验的社区</h1>
<h2>社区简介</h2>
<p>本社区通过收集、探讨开发者体验 - DX（Developer Experience），并给出良好开发者体验的说明，将持续优化和演进。</p>
<p>通过《DPC开发者完美体验指南》，以及指南说明和所推荐的工具，将会使DPC社区成员可以自助提升自己的开发效率和体验。</p>
<p><code>&quot;拥有完美的体验&quot;，和&quot;拥有完美的一生&quot;有很多相似的地方。因为不确定因素太多，想要拥有一个完美的答案实在是难上加难。 释道儒试图去帮助我们过好一生。 DPC只有一个目标，那就是分享一下对于开发者体验的理解，奢望能实际帮助到大家，哪怕就一点点。</code></p>
<h3>背景</h3>
<p><a href="https://www.devops-research.com/research.html">DORA</a>用统计数据，分析出了 &quot;文化、工作环境&quot; - &quot;软件交付效率及运营效率&quot; - &quot;组织效率&quot;三者之间的关联，并从四个维度（4KM）给出了衡量指标。<br />
DORA从&quot;公司&quot; - &quot;团队&quot; - &quot;组织&quot;的角度分析了研发效能，DPC则希望从开发者个人的角度来聊一聊研发效能。</p>
<h3>原则：</h3>
<ul>
<li>贴进日常生活</li>
<li>从主观和客观的维度，多维度进行分析</li>
<li>理论和实际相结合</li>
</ul>
<h3>目录</h3>
<ul>
<li><a href="spec.md">介绍</a></li>
<li><a href="gooday/index.md">开心一天</a>
<ul>
<li><a href="gooday/business-analysis.md">业务分析</a></li>
<li><a href="gooday/iteration-zero.md">迭代零</a>
<ul>
<li><a href="capability/architecture.md">架构</a></li>
</ul></li>
<li><a href="gooday/standup.md">站会</a></li>
<li><a href="gooday/card.md">卡</a></li>
<li><a href="gooday/local-development.md">本地开发</a></li>
<li><a href="gooday/tech-solution.md">解决方案</a></li>
<li><a href="gooday/ci-cd.md">持续集成持续交付</a></li>
<li><a href="gooday/desk-check.md">验收</a></li>
<li><a href="gooday/devops.md">DevOps</a></li>
<li><a href="gooday/team-culture.md">团队文化</a></li>
<li><a href="gooday/team-enablement.md">团队赋能</a></li>
<li><a href="gooday/good-life.md">美好生活</a></li>
</ul></li>
<li><a href="practices.md">实践</a>
<ul>
<li><a href="#代码回顾">代码走查</a></li>
<li><a href="ci-cd.md">CI/CD</a></li>
<li><a href="clean-architecture-v1.md">整洁架构</a></li>
</ul></li>
<li><a href="weekly-catchup.md">活动</a>
<ul>
<li><a href="#美好的一天">开发者美好的一天</a></li>
</ul></li>
</ul>
<h1>高效开心的一天</h1>
<h2>前提</h2>
<ul>
<li>将要进入迭代开发的业务需求清晰明确</li>
<li>迭代零的准备工作都很充分
<ul>
<li>基础设施自动化</li>
<li>CI/CD根据不同阶段设计合理，持续演进</li>
</ul></li>
</ul>
<h2>高效的一天</h2>
<ul>
<li>15分钟站会</li>
<li>新挑选或正在做的卡描述清晰</li>
<li>自动化流水线健康全绿</li>
<li>拉取最新代码没有冲突，本地自动化测试高效</li>
<li>开发过程中技术难度适中</li>
<li>频繁提交代码，并快速获得有效反馈</li>
<li>Desk Check一次通过</li>
<li>快速上线</li>
<li>好好享受下午茶</li>
<li>30分钟Code Review高效</li>
<li>成就满满、开开心心的回家</li>
</ul>
<h1>业务分析</h1>
<p>todo...</p>
<h1>迭代零</h1>
<p>迭代零介于需求分析和项目交付之间，通常理解为准备阶段。</p>
<p>通常需要准备如下：</p>
<ul>
<li>项目开始会议</li>
<li>工作环境准备</li>
<li>架构讨论、设计</li>
<li>测试策略</li>
</ul>
<h2 id="architecture">Architecture</h2>
<h3>什么是架构</h3>
<p>从定义的角度来看，架构是系统的基础组织形式，体现为组件、组件间的关系以及环境，架构也是指导系统设计和演化的原则 - <a href="https://en.wikipedia.org/wiki/IEEE_1471">IEEE 1471</a></p>
<ul>
<li>系统：是一系列组件组织在一起去完成某些特定功能。</li>
<li>环境：或称之为上下文，代表了开发、运营、政治环境、战略等对系统的影响。</li>
<li>组件：如数据库和应用程序，可视作组件。</li>
<li>组件关系：体现为组件间如何交互、通讯。</li>
</ul>
<p>从能力的角度来看，架构指的是 - 指导对软件系统的适用性、性能、寿命，成本和合规性影响最大的技术决策。<br />
是一种可以从不同的角度来支撑项目，获取成功的决策能力。</p>
<p>拿胜任力来说，有：</p>
<ul>
<li>API和服务设计</li>
<li>应用程序架构</li>
<li>云原生架构</li>
<li>去中心化架构</li>
<li>分布式系统架构</li>
<li>演进式架构</li>
<li>遗留系统迁移</li>
<li>轻量级架构治理</li>
<li>安全架构</li>
<li>...</li>
</ul>
<p>在敏捷工程实践 - 发现、定义、交付及运行、运行及演进流程中，架构发生在第二阶段 - 定义。<br />
这一阶段通常会产出最小可行产品，也就是说我们的假设已经在发现阶段验证过了，并且证明可行。<br />
我们决定在这一阶段正式启动项目交付，那么我们就要决定所要构建的内容，优先级排列依据是什么，大概预估项目时长，确定初步的风险、假设和依赖关系。<br />
还需要确认我们服务和内部、外部系统的集成关系。<br />
也就是在这一阶段，我们要结合发现阶段的内容，交付阶段的要求，对我们所要交付的软件进行适用性、性能、寿命，成本和合规性方面做好技术决策。</p>
<p>需要考虑的因素有哪些呢？比如：</p>
<ul>
<li>产品愿景及路线图：描述产品定位、发展路径，及商业目的</li>
<li>技术战略：结合公司愿景、IT战略所给出的技术决策框架，将公司发展计划与产品服务紧密结合，以实现整个组织内竞争优势的可持续性</li>
<li>发布计划：将以什么样的节奏和计划交付产品</li>
</ul>
<p>简而言之，架构就是根据产品/服务的定位，及商业目的，结合开发、运营、政治环境、战略等多重因素，所作出的技术决策，以帮助持续交付、优化，最终使组织获取商业成功。</p>
<h1>站会</h1>
<p>todo...</p>
<h1>卡</h1>
<p>todo...</p>
<h1>本地开发</h1>
<p>todo...</p>
<h1>技术解决方案</h1>
<p>todo...</p>
<h1>持续集成持续交付</h1>
<p>todo...</p>
<h1>验收</h1>
<p>todo...</p>
<h1 id="devops">DevOps</h1>
<p>todo...</p>
<h1>团队文化</h1>
<p>todo...</p>
<h1>团队赋能</h1>
<p>todo...</p>
<h1>生活开心</h1>
<p>todo...</p>
<h1>实践</h1>
<p>todo...</p>
<h1>代码走查</h1>
<h2>什么样的代码走查是我们所追求的</h2>
<ul>
<li>所有DEV都积极参加，QA可以选择参加</li>
<li>30分钟内结束</li>
<li>回顾完今天所有已提交的代码</li>
<li>提出的反馈大部分集中在整洁架构和代码重用上</li>
<li>代码lint规则没有随意改变，如需改变，要团队达成一致</li>
<li>不是不关心代码命名及规范，而是这些细节都要交给自动化工具，如<a href="https://en.wikipedia.org/wiki/PMD_(software)">PMD</a>, <a href="https://en.wikipedia.org/wiki/Lint_(software)">LINT</a></li>
<li>昨天的反馈都已经在修改或已提交</li>
</ul>
<h3>为什么要有代码走查</h3>
<p>快速反馈！</p>
<p>敏捷思想，衍生出了很多流派和实践，这其中，流传较广的就有精益思想，其中最具威力的就是上面这四个字 - 快速反馈。</p>
<p>Pair写了一天的代码，大家找时间聚在一起，一起分享一下今天完成的代码。<br />
大家按照团队约定的规则一起给出反馈。<br />
这不仅加深了大家对整体代码的理解，同时也让大家有机会借鉴一下彼此的实践。<br />
慢慢地就会发现一些团队的共识，按ADR沉淀下来，自然就形成了团队的编码规范，有了团队的编码文化。<br />
默契越来越深，效率越来越高。</p>
<h3>怎么做才算支持代码走查</h3>
<ul>
<li>准时出席</li>
<li>熟悉团队代码走查流程，并提前做好准备</li>
<li>尊重他人的劳动成果，接受合理的建议，并采取行动</li>
<li>适量补充上下文，用于帮助理解代码实现逻辑</li>
</ul>
<h3 id="-1">实践</h3>
<p>代码走查作为软件质量保证当中最为重要的一步，需要团队集体参与。<br />
但是团队一旦超过一定规模，代码走查就会容易失去控制，从而失去了节奏，起不到应有的效果。<br />
那么我们如何来约定团队的走查步骤呢？我们到底要走查什么呢？<br />
结构！结构！结构！<br />
代码的结构才是走查的重中之重。<br />
技术难点可以交给前期的spike，命名规范可以团队约定，但是结构一旦混乱，后期迭代和维护的成本将会失控。<br />
另外，一些常见的最佳实践和代码风格，我们可以交给一些工具来帮我们实践。<br />
<a href="https://github.com/topdevexp/practices">Kotlin Example</a> 是一个将Lint和PMD工具应用于Kotlin项目的实践。<br />
Lint工具可以帮助我们规范代码风格，PMD可以发现常见的编程缺陷，例如未使用的变量，空的catch块，不必要的对象创建等等。<br />
在项目中设置git hooks，每次commit之前触发lint和pmd的检查，能够帮助团队规范代码的风格，让代码走查更加专注于结构的讨论。</p>
<h1>持续集成和部署服务</h1>
<h2>什么样的持续集成和部署服务是我们追求的</h2>
<ul>
<li>持续集成的过程中可以发现代码错误，并及时地反馈给团队准确的错误信息</li>
<li>持续集成和部署的流程和状态清晰可见</li>
<li>部署自动化，无需或较少的人工干预</li>
<li>部署的时间在可接受的范围内</li>
<li>部署过程中，运行中的服务可用性和稳定性不受影响</li>
<li>持续集成的服务保持随时可用，方便回滚和按需部署</li>
<li>持续集成的服务是可以复用的，并有相应的版本管理</li>
</ul>
<h2>参考</h2>
<ul>
<li><p><a href="https://www.thoughtworks.com/insights/blog/5-traits-good-delivery-pipeline">5 Traits of a Good Delivery Pipeline</a></p>
<h1>整洁架构</h1>
<h2>我们所追求的整洁架构</h2></li>
<li>独立的框架，不依赖某个具体的库</li>
<li>架构的各个分层都是可测试的</li>
<li>UI独立，改变UI并不会改变后台业务规则</li>
<li>数据库独立，业务规则不会和数据库绑定</li>
<li>独立的外部代理，对你是否使用MVC或DCI并不关心</li>
<li><p>不同的领域之间业务规则之间侵略性最小，最好没有依赖</p></li>
</ul>
<h2 id="why">Why？</h2>
<p>为了效率！</p>
<p>当一个项目从集成架构到代码结构，如果做到了整洁清晰，那么无论运维人员还是开发人员，<br />
都能够快速理解项目结构，并且投入到日常的工作开发中。</p>
<h2>如何才能够使架构整洁？</h2>
<p>TODO</p>
<p>参考：<a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html" title="Title">clean architecture</a>.</p>
<h1>风险管理</h1>
<h2>我们追求的风险管理实践</h2>
<ul>
<li>有明确的流程处理线上事故，团队全员参与，而不是仅有Dev。</li>
<li>聚焦于解决问题而不是追责。</li>
<li>有明确的事故评级方案，并按照综合评级安排修复计划，而不是一味紧急抢修。</li>
<li>Dev有权拒绝为低优先级的事故加班。</li>
<li>严重事故处理之后有 Retro，产出的 &quot;Lesson Learned&quot; 需要整理成文档分享给其他团队。</li>
<li>定期更新威胁建模，并积极执行产出的 Actions。</li>
</ul>
<h3>为什么要有风险管理</h3>
<h3>怎么做才算风险管理</h3>
<ul>
<li>线上事故处理流程（Draft）</li>
<li>Downtime 小于30分钟：<br />
事后发送处理报告和时间线给 Stakeholder 和受到影响的用户。</li>
<li>Downtime 大于等于30分钟：<br />
立即发送 Outage 信息给用户，并告知当前的处理进度和预计恢复的时间。<br />
事后处理同上。</li>
<li>线上事故评级方案（Draft）</li>
</ul>
<table>
<thead>
<tr class="header">
<th>维度/优先级</th>
<th>高</th>
<th>中</th>
<th>低</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>影响的功能</td>
<td>核心功能</td>
<td>特定功能</td>
<td>边缘功能</td>
</tr>
<tr class="even">
<td>影响的范围</td>
<td>核心用户群或所有用户</td>
<td>特定用户</td>
<td>极少数用户</td>
</tr>
<tr class="odd">
<td>影响的后果</td>
<td>敏感数据被破坏或泄露</td>
<td>普通数据被破坏或泄露</td>
<td>边缘数据被破坏或泄露</td>
</tr>
<tr class="even">
<td>复现成功率</td>
<td>重复特定步骤可100%复现</td>
<td>特定条件复现（如时间地点）</td>
<td>复现条件极难达成</td>
</tr>
<tr class="odd">
<td>复现复杂度</td>
<td>业务流程中的正常操作</td>
<td>普通用户的异常操作</td>
<td>有技术背景的用户的异常操作</td>
</tr>
</tbody>
</table>
<h1>美好的一天</h1>
<h2 id="-1">前提</h2>
<ul>
<li>将要进入迭代开发的业务需求清晰明确</li>
<li>迭代零的准备工作都很充分
<ul>
<li>基础设施自动化</li>
<li>CI/CD根据不同阶段设计合理，持续演进</li>
</ul></li>
</ul>
<h2 id="-1">高效的一天</h2>
<ul>
<li>15分钟站会</li>
<li>新挑选或正在做的卡描述清晰</li>
<li>自动化流水线健康全绿</li>
<li>拉取最新代码没有冲突，本地自动化测试高效</li>
<li>开发过程中技术难度适中</li>
<li>频繁提交代码，并快速获得有效反馈</li>
<li>Desk Check一次通过</li>
<li>快速上线</li>
<li>好好享受下午茶</li>
<li>30分钟Code Review高效</li>
<li>成就满满、开开心心的回家</li>
</ul>
<h3>个人体验和高效</h3>
<p>体验现在出现的频率越来高。</p>
<p>出游时，旅行社会提供不同的选择，常见的有购物团和纯玩团。<br />
购物团就是到景点，5分钟拍照时间，剩余时间全部用来购物。<br />
因为团费便宜，旅行社要通过旅客购物抽成来赚取利润。<br />
纯玩团呢就很直接，收费贵。<br />
没有购物环节，时间全花在景点上。<br />
通过定价的区别来看，大家普遍认为纯玩团体验会好一些。</p>
<p>坐飞机也一样，有分头等舱和经济舱。<br />
相对而言，贵的头等舱的体验比经济舱要好。<br />
空间更大，乘坐体验好。服务更细心，服务体验好。</p>
<p>那研发工程师在日常工作的过程中，什么样的体验算是较好的体验？相对于高效的一天，我们可以逐条来分析一下：</p>
<ul>
<li>站会上清晰地讲出正在做的和准备做的事情，及有没有阴碍</li>
<li>故事卡大小合适，难度适中，业务场景清晰，验收场景明确</li>
<li>持续集成和持续交付流水线状态健康稳定</li>
<li>代码自动化管理完善</li>
<li>技术难点可预见，并拆解合理</li>
<li>团队协作默契，顺畅</li>
<li>验收准备充分，验收过程高效</li>
<li>第一时间交付价值，稳定有保障</li>
<li>享受美好的团队时间和团队氛围</li>
<li>团队对技术要求，架构演进计划和方向有统一认识</li>
<li>良好地反馈和放松将有助于迎接另一个美好的一天</li>
</ul>
<p>对于客户而言，有用户体验，用户体验好了，自然愿意花更多的时间在咱们的服务上。<br />
对于开发者，开发体验变好了，那又会怎么影响研发效率和质量呢。</p>
<h2>程序员的兵器库</h2>
<p>成为超级英雄可能是每一个人的梦想，从现在这么火的漫威宇宙和DC宇宙就能看出一二。</p>
<p>有一个用来暖场的小游戏，那就是如果每个人都可以选择拥有一种超能力，你最想拥有的超能力是什么。<br />
有一个答案让我印象深刻。<br />
那就是 - 蝙蝠侠。<br />
大家可能很容易想到原因。<br />
因为闪电侠与蝙蝠侠有一场精典的对白。</p>
<p>闪电侠：请问你的超能力是什么？<br />
蝙蝠侠：有钱。</p>
<p>太精典，以至于深入人心。<br />
可这有什么好印象深刻的呢，多么朴实无华的理由！<br />
之所以让我印象深刻，当然不是想成为蝙蝠侠，而是后面说的 - 因为蝙蝠侠的兵器库实在太炫酷了。<br />
后面了解到这位小伙伴有收藏的爱好。</p>
<p>那作为程序员，知识的创造者。<br />
我们的兵器库应该长什么样，好让我们开心高效地度过每一天。</p>
<p>经过讨论，我们先来个alpha版：</p>
<ul>
<li>将要进入迭代开发的业务需求清晰明确
<ul>
<li>TODO</li>
</ul></li>
<li>迭代零的准备工作都很充分
<ul>
<li>Project Kickoff</li>
<li>Tech stack choice</li>
<li>Architecture specification</li>
<li>CI/CD Design</li>
</ul></li>
<li>15分钟站会
<ul>
<li>Facilitate Skill</li>
<li>User Journey</li>
</ul></li>
<li>新挑选或正在做的卡描述清晰
<ul>
<li>Card INVEST principle</li>
<li>Risk Management</li>
<li>Communication</li>
</ul></li>
<li>自动化流水线健康全绿
<ul>
<li>TODO</li>
</ul></li>
<li>拉取最新代码没有冲突，本地自动化测试高效
<ul>
<li>TODO</li>
</ul></li>
<li>开发过程中技术难度适中
<ul>
<li>TDD</li>
<li>Pair</li>
<li>Evolving Architecture</li>
</ul></li>
<li>频繁提交代码，并快速获得有效反馈
<ul>
<li>Git Flow</li>
<li>Clean Code</li>
<li>Refactor</li>
</ul></li>
<li>Desk Check一次通过
<ul>
<li>Test Strategy</li>
<li>Customer Focus</li>
<li>Pipeline</li>
</ul></li>
<li>快速上线
<ul>
<li>TODO</li>
</ul></li>
<li>好好享受下午茶
<ul>
<li>TODO</li>
</ul></li>
<li>30分钟Code Review高效
<ul>
<li>Lint Practices</li>
<li>Security</li>
<li>Clean Architecture</li>
</ul></li>
<li>成就满满、开开心心的回家
<ul>
<li>TODO</li>
</ul></li>
</ul>
</body>
</html>
